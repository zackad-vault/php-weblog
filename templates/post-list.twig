{% extends 'base-skeleton.twig' %}
{% block content %}
  <div class="container markdown-body">
  {% if flash %}
    {{ ("## " ~ flash)|markdown }}
    {% markdown %}
    {% endmarkdown %}
  {% endif %}
    {% for item in postlist %}
      <div class="post post-list">
        <div class="post-header">
          <div class="title">
            {% if session.login and session.role == 'admin' %}
            <a href="/edit/article/{{ item.id }}"><i class="fa fa-pencil"></i></a> | 
            {% endif %}
            <a href="/post/{{ item.id }}"> {{ item.title }} </a>
          </div>
          <div class="meta">
          {% if item.date_posted == item.date_modified %}
            <div class="timestamp">Posted {{ item.date_posted|date('M d, Y') }}</div>
          {% else %}
            <div class="timestamp">Updated {{ item.date_modified|date('M d, Y') }}</div>
          {% endif %}
            <div class="pageviews"><i class="fa fa-eye"></i> {{ item.views }}x Views</div>
            <div class="tags">{{ item.tags|upper }}</div>
          </div>
        </div>
        <div class="post-content">
          <div>
            {% if item.post|markdown|striptags|raw|length > 400 %}
              <blockquote>
                {{ item.post|markdown|striptags|raw|slice(0,400) }} ... <a href="/post/{{ item.id }}/{{ item.slug }}/">Continue Reading</a>
              </blockquote>
            {% else %}
              <blockquote>
                {{ item.post|markdown|striptags|raw }}
              </blockquote>
            {% endif %}
          </div>
        </div>
        <small><em>Written by : {{ item.poster }}</em></small>
      </div>
      <hr>
    {% endfor %}
  </div>
{% endblock %}
{% block disqus %}
    
{% endblock %}
